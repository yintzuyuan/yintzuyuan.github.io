<!DOCTYPE html>
<html lang="zh-TW" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{ title }} - TzuYuan Yin</title>

  <!-- SEO Meta Tags -->
  <meta name="description" content="{{ description or '字體設計師 × 開發者 - TzuYuan Yin 殷慈遠' }}">
  <meta name="author" content="TzuYuan Yin">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://erikyin.net{{ page.url }}">
  <meta property="og:title" content="{{ title }} - TzuYuan Yin">
  <meta property="og:description" content="{{ description or '字體設計師 × 開發者 - TzuYuan Yin 殷慈遠' }}">
  <meta property="og:image" content="https://erikyin.net/assets/og-image.jpg">

  <!-- Twitter -->
  <meta property="twitter:card" content="summary_large_image">
  <meta property="twitter:url" content="https://erikyin.net{{ page.url }}">
  <meta property="twitter:title" content="{{ title }} - TzuYuan Yin">
  <meta property="twitter:description" content="{{ description or '字體設計師 × 開發者 - TzuYuan Yin 殷慈遠' }}">
  <meta property="twitter:image" content="https://erikyin.net/assets/og-image.jpg">

  <!-- PWA -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#000000">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Erik Yin">

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="/assets/icons/apple-touch-icon.png">

  <!-- 內聯極簡 CSS -->
  <style>{% include "critical.css" %}</style>

  <!-- 延遲載入完整 CSS -->
  <link rel="preload" href="/assets/style.css" as="style" onload="this.rel='stylesheet'">
  <noscript><link rel="stylesheet" href="/assets/style.css"></noscript>

  <!-- 主題初始化 -->
  <script>
    const theme = localStorage.getItem('theme') || 'light';
    document.documentElement.setAttribute('data-theme', theme);
  </script>
</head>
<body>
  <header>
    <nav>
      <button class="nav-toggle" aria-label="選單">☰</button>
      <div class="nav-links">
        <a href="/">首頁</a>
        <a href="/works/">作品</a>
        <a href="/about/">關於</a>
        <a href="/contact/">聯絡</a>
        <a href="/boost/">支持</a>
      </div>
      <button data-theme-toggle aria-label="切換主題" style="float:right; background:none; border:1px solid var(--border); color:var(--text); padding:0.5rem; cursor:pointer; border-radius:4px; line-height:0;">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="4" />
          <path d="M12 2v2" />
          <path d="M12 20v2" />
          <path d="m4.93 4.93 1.41 1.41" />
          <path d="m17.66 17.66 1.41 1.41" />
          <path d="M2 12h2" />
          <path d="M20 12h2" />
          <path d="m6.34 17.66-1.41 1.41" />
          <path d="m19.07 4.93-1.41 1.41" />
        </svg>
      </button>
    </nav>
  </header>

  <main>
    {{ content | safe }}
  </main>

  <!-- 回到頂部按鈕 -->
  <button id="back-to-top" aria-label="回到頂部" style="position:fixed;bottom:2rem;right:2rem;width:3rem;height:3rem;background:var(--text);color:var(--bg);border:none;border-radius:50%;font-size:1.5rem;cursor:pointer;opacity:0;visibility:hidden;transition:all 0.3s;z-index:99;">↑</button>

  <footer>
    <p>© 2025 TzuYuan Yin · 殷慈遠</p>
  </footer>

  <!-- 極簡主題切換 -->
  <script>
    const btn = document.querySelector('[data-theme-toggle]');
    const sunIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="4"/><path d="M12 2v2"/><path d="M12 20v2"/><path d="m4.93 4.93 1.41 1.41"/><path d="m17.66 17.66 1.41 1.41"/><path d="M2 12h2"/><path d="M20 12h2"/><path d="m6.34 17.66-1.41 1.41"/><path d="m19.07 4.93-1.41 1.41"/></svg>';
    const moonIcon = '<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401"/></svg>';

    btn.addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      const next = current === 'dark' ? 'light' : 'dark';
      document.documentElement.setAttribute('data-theme', next);
      localStorage.setItem('theme', next);
      btn.innerHTML = next === 'dark' ? moonIcon : sunIcon;
    });

    // 初始化按鈕圖示
    btn.innerHTML = localStorage.getItem('theme') === 'dark' ? moonIcon : sunIcon;

    // 導航欄收合
    document.querySelector('.nav-toggle')?.addEventListener('click', e =>
      e.target.nextElementSibling.classList.toggle('show')
    );

    // 回到頂部按鈕
    const backToTop = document.getElementById('back-to-top');
    if (backToTop) {
      window.addEventListener('scroll', () => {
        if (window.scrollY > window.innerHeight) {
          backToTop.style.opacity = '1';
          backToTop.style.visibility = 'visible';
        } else {
          backToTop.style.opacity = '0';
          backToTop.style.visibility = 'hidden';
        }
      });

      backToTop.addEventListener('click', () => {
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    }
  </script>
</body>
</html>
